<div class="text-white" id="contenido">
  @for(tweet of tweetList; track tweet.tweet_id){
    @if (this.likedTweets && this.checkLikes(tweet.tweet_id.toString())) {
      <div class="border border-white mb-4 p-5 w-75 mx-auto">
        <h4><a routerLink="/profile/{{tweet.username}}"><img [src]="'data:image/png;base64,' + tweet.user_image" alt="userAvatar" class="avatar me-2 rounded-circle"></a><a routerLink="/profile/{{tweet.username}}" class="text-white text-decoration-none">{{ tweet.username }}</a></h4><p class="tweetText">{{tweet.tweet_text}}</p>
        <span class="me-4"><a class="text-white"><i class="bi bi-heart-fill text-danger" (click)="onSetLike(tweet.tweet_id)"></i></a> {{tweet.num_likes}}</span> <span (click)="openTweetComments(tweetModal, tweet)" class="text-white"><i class="bi bi-chat-dots"></i> {{tweet.comments}}</span> <span><a href="" class="text-white"><i class="bi bi-share ms-4"></i></a></span>
      </div>
    }@else{
      <div class="border border-white mb-4 p-5 w-75 mx-auto">
        <h4><a routerLink="/profile/{{tweet.username}}"><img [src]="'data:image/png;base64,' + tweet.user_image" alt="userAvatar" class="avatar me-2 rounded-circle"></a><a routerLink="/profile/{{tweet.username}}" class="text-white text-decoration-none">{{ tweet.username }}</a></h4><p class="tweetText">{{tweet.tweet_text}}</p>
        <span class="me-4"><a class="text-white"><i class="bi bi-heart" (click)="onSetLike(tweet.tweet_id)"></i></a> {{tweet.num_likes}}</span> <span (click)="openTweetComments(tweetModal, tweet)" class="text-white"><i class="bi bi-chat-dots"></i> {{tweet.comments}}</span> <span><a href="" class="text-white"><i class="bi bi-share ms-4"></i></a></span>
      </div>
    }
    
  }
    <hr>
</div>


<ng-template #tweetModal let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title text-white" id="modal-basic-title">Tweet</h4>
		<button type="button" class="btn-Cerrar" (click)="closeModal()"><i class="bi bi-x-lg text-white"></i></button>
  </div>
  <div class="modal-body">
    <div class="tweet">
      <h4><a routerLink="/profile/{{this.tweetToComment.username}}"><img [src]="'data:image/png;base64,' + this.tweetToComment.user_image" alt="userAvatar" class="avatar me-2 rounded-circle"></a><a routerLink="/profile/{{this.tweetToComment.username}}" class="text-white text-decoration-none">{{ this.tweetToComment.username }}</a></h4><p class="tweetText">{{this.tweetToComment.tweet_text}}</p>
    </div>
    <input type="text" class="form-control mb-4" placeholder="Responde al tweet..." [(ngModel)]="commentText" (keyup.enter)="postComment($event)">

    @for(tweet of commentsTweet; track tweet.tweet_id){
      @if (this.likedTweets && this.checkLikes(tweet.tweet_id.toString())) {
        <div class="border border-white mb-4 p-5 w-75 mx-auto">
          <h4><a routerLink="/profile/{{tweet.username}}"><img [src]="'data:image/png;base64,' + tweet.user_image" alt="userAvatar" class="avatar me-2 rounded-circle"></a><a routerLink="/profile/{{tweet.username}}" class="text-white text-decoration-none">{{ tweet.username }}</a></h4><p class="tweetText">{{tweet.tweet_text}}</p>
          <span class="me-4 text-white"><a class="text-white"><i class="bi bi-heart-fill text-danger" (click)="onSetLike(tweet.tweet_id)"></i></a> {{tweet.num_likes}}</span> <span (click)="openTweetComments(tweetModal, tweet)" class="text-white"><i class="bi bi-chat-dots"></i> {{tweet.comments}}</span> <span><a href="" class="text-white"><i class="bi bi-share ms-4"></i></a></span>
        </div>
      }@else{
        <div class="border border-white mb-4 p-5 w-75 mx-auto">
          <h4><a routerLink="/profile/{{tweet.username}}"><img [src]="'data:image/png;base64,' + tweet.user_image" alt="userAvatar" class="avatar me-2 rounded-circle"></a><a routerLink="/profile/{{tweet.username}}" class="text-white text-decoration-none">{{ tweet.username }}</a></h4><p class="tweetText">{{tweet.tweet_text}}</p>
          <span class="me-4 text-white"><a class="text-white"><i class="bi bi-heart" (click)="onSetLike(tweet.tweet_id)"></i></a> {{tweet.num_likes}}</span> <span (click)="openTweetComments(tweetModal, tweet)" class="text-white"><i class="bi bi-chat-dots"></i> {{tweet.comments}}</span> <span><a href="" class="text-white"><i class="bi bi-share ms-4"></i></a></span>
        </div>
      }
      
    }
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary" (click)="d('Cancel click')">Cerrar</button>
    <button type="button" class="btn btn-primary" (click)="postComment($event)">Responder</button>
  </div>
</ng-template>
